"use strict";var Y=Object.create;var T=Object.defineProperty;var Z=Object.getOwnPropertyDescriptor;var $=Object.getOwnPropertyNames;var X=Object.getPrototypeOf,ee=Object.prototype.hasOwnProperty;var te=(s,t)=>{for(var o in t)T(s,o,{get:t[o],enumerable:!0})},W=(s,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let e of $(t))!ee.call(s,e)&&e!==o&&T(s,e,{get:()=>t[e],enumerable:!(n=Z(t,e))||n.enumerable});return s};var h=(s,t,o)=>(o=s!=null?Y(X(s)):{},W(t||!s||!s.__esModule?T(o,"default",{value:s,enumerable:!0}):o,s)),se=s=>W(T({},"__esModule",{value:!0}),s);var ce={};te(ce,{Client:()=>B,ConnectionConfig:()=>z,InitDisplay:()=>_,MESSAGE_TYPE:()=>O,MessageParser:()=>J,delay:()=>b,fetchJson:()=>ae,getMessageType:()=>l,getValuesByKeys:()=>i,jsonParse:()=>L,jsonString:()=>c,loop:()=>N,postJson:()=>ie,removeKeys:()=>k,timeout:()=>ne});module.exports=se(ce);var f=require("baileys"),A=h(require("chalk"));var I=require("baileys"),V=h(require("node-cache")),R=h(require("pino"));var E={author:"https://github.com/zaadevofc",repository:"https://github.com/zaadevofc/zaileys",package:"https://www.npmjs.com/package/zaileys",version:[2,2413,1],browser:["Mac OS","chrome","121.0.6167.159"]};function z(s,t,o){async function n(e){return o?(await o.loadMessage(e.remoteJid,e.id))?.message||void 0:I.proto.Message.fromObject({})}return{printQRInTerminal:!s.pairing,defaultQueryTimeoutMs:0,connectTimeoutMs:6e4,keepAliveIntervalMs:1e4,msgRetryCounterCache:new V.default,syncFullHistory:!0,mobile:!1,markOnlineOnConnect:!1,generateHighQualityLinkPreview:!0,browser:E.browser,version:E.version,logger:(0,R.default)({enabled:!1}),auth:{creds:t.creds,keys:(0,I.makeCacheableSignalKeyStore)(t.keys,(0,R.default)({enabled:!1}))},getMessage:n,patchMessageBeforeSending:e=>(!!(e.buttonsMessage||e.templateMessage||e.listMessage)&&(e={viewOnceMessage:{message:{messageContextInfo:{deviceListMetadataVersion:2,deviceListMetadata:{}},...e}}}),e)}}var O={text:"text",conversation:"text",imageMessage:"image",contactMessage:"contact",locationMessage:"location",extendedTextMessage:"text",documentMessage:"document",audioMessage:"audio",videoMessage:"video",protocolMessage:"protocol",contactsArrayMessage:"contactsArray",highlyStructuredMessage:"highlyStructured",sendPaymentMessage:"sendPayment",liveLocationMessage:"liveLocation",requestPaymentMessage:"requestPayment",declinePaymentRequestMessage:"declinePaymentRequest",cancelPaymentRequestMessage:"cancelPaymentRequest",templateMessage:"template",stickerMessage:"sticker",groupInviteMessage:"groupInvite",templateButtonReplyMessage:"templateButtonReply",productMessage:"product",deviceSentMessage:"deviceSent",listMessage:"list",viewOnceMessage:"viewOnce",orderMessage:"order",listResponseMessage:"listResponse",ephemeralMessage:"ephemeral",invoiceMessage:"invoice",buttonsMessage:"buttons",buttonsResponseMessage:"buttonsResponse",paymentInviteMessage:"paymentInvite",interactiveMessage:"interactive",reactionMessage:"reaction",stickerSyncRmrMessage:"sticker",interactiveResponseMessage:"interactiveResponse",pollCreationMessage:"pollCreation",pollUpdateMessage:"pollUpdate",keepInChatMessage:"keepInChat",documentWithCaptionMessage:"document",requestPhoneNumberMessage:"requestPhoneNumber",viewOnceMessageV2:"viewOnce",encReactionMessage:"reaction",editedMessage:"text",viewOnceMessageV2Extension:"viewOnce",pollCreationMessageV2:"pollCreation",scheduledCallCreationMessage:"scheduledCallCreation",groupMentionedMessage:"groupMentioned",pinInChatMessage:"pinInChat",pollCreationMessageV3:"pollCreation",scheduledCallEditMessage:"scheduledCallEdit",ptvMessage:"ptv",botInvokeMessage:"botInvoke",callLogMesssage:"callLog",encCommentMessage:"encComment",bcallMessage:"bcall",lottieStickerMessage:"lottieSticker",eventMessage:"event",commentMessage:"comment",newsletterAdminInviteMessage:"newsletterAdminInvite",extendedTextMessageWithParentKey:"text",placeholderMessage:"placeholder",encEventUpdateMessage:"encEventUpdate"};function N(s,t){return setInterval(s,t)}function c(s){return JSON.stringify(s??{},null,2)}function L(s){return JSON.parse(c(s))}function ne(s,t){return setTimeout(s,t)}async function b(s){return new Promise(t=>setTimeout(t,s))}var ae=async(s,t)=>await fetch(s).then(o=>o.json()),ie=async(s,t)=>await fetch(s,{body:JSON.stringify(t),method:"POST"}).then(o=>o.json());function i(s,t){let o=[],n=e=>{e!=null&&(Array.isArray(e)?e.forEach(n):typeof e=="object"&&Object.entries(e).forEach(([a,r])=>{t.includes(a)&&o.push(r),n(r)}))};return n(s),o}function k(s,t){let o=n=>{if(n===null||typeof n!="object")return n;if(Array.isArray(n))return n.map(o);let e={};for(let a in n)t.includes(a)||(e[a]=o(n[a]));return e};return o(L(s))}function l(s){if(s=L(s),typeof s!="object"||s===null)return[];for(let t of Object.keys(s))if(Object.keys(O).includes(t))return[O[t],t];for(let t of Object.values(s)){let o=l(t);if(o)return o}return[]}var q=h(require("cfonts")),G=h(require("ora"));var j=require("events"),U=h(require("quick-lru")),Pe=new U.default({maxSize:9999999999}),w=new j.EventEmitter;var D="https://ko-fi.com/zaadevofc";function _(s){console.clear(),q.default.say("Zaileys",{font:"block",colors:["white","green"],letterSpacing:1,lineHeight:1,space:!1,maxLength:"0"}),q.default.say(`         Love this package? help me with donation:         |               ${D}                 |`,{font:"console",colors:["black"],background:"green",letterSpacing:1,space:!1,maxLength:"0"}),w.on("conn_msg",async t=>{let o=(0,G.default)();await o[t[0]](t[1]),await o.clear()}),s.showLogs&&w.on("act_msg",t=>{})}async function J(s,t,o){return s?await Promise.all(s.map(async(e,a)=>{if(l(e.message).length==0||l(e.message)[0]=="protocol"||c(e.message).includes("pollUpdateMessage"))return;let r=k(e.message,["contextInfo"]),p=i(e.message,["quotedMessage"])[0],g=e.key,y=i(e.message,["contextInfo"])[0],x=l(r)[1]=="editedMessage",F=x&&i(e.message,["protocolMessage"])[0].key,P=x&&k(await o.loadMessage(F.remoteJid,F.id),["contextInfo"]);P=k(P.message,["contextInfo"]);let K=/\b\d+@\S+\b/g.exec(i(g,["participant"])[0]||i(g,["remoteJid"])[0])?.[0],S=/\b\d+@\S+\b/g.exec(i(y,["participant"])[0])?.[0],d=l(x?P:r);d=d[0]=="viewOnce"?l(i(r,[d[1]])):d;let u=l(p);u=u[0]=="viewOnce"?l(i(p,[u[1]])):u;let Q=i(r,["conversation","text","caption","contentText","description"])[0],H=i(p,["conversation","text","caption","contentText","description"])[0],M=d[0]!="text"&&i(x?P:r,[d[1]=="documentWithCaptionMessage"?"documentMessage":d[1]])[0];M=d[0]=="viewOnce"?i(M,l(M))[0]:M;let v=u[0]!="text"&&i(p,[u[1]=="documentWithCaptionMessage"?"documentMessage":u[1]])[0];v=u[0]=="viewOnce"?i(v,l(v))[0]:v;let C=await o.messages[S].get(i(y,["stanzaId"])[0]);return console.log("\u{1F680} ~ letmessages:any=awaitPromise.all ~ replyJid:",S),console.log("\u{1F680} ~ letmessages:any=awaitPromise.all ~ replyStore:",C),{body:{fromMe:e.key.fromMe,chatId:e.key.id,participant:K,pushName:e.pushName,timestamp:e.messageTimestamp,type:d[0],text:Q,isStory:c(g).includes("status@broadcast")??!1,isGroup:c(g).includes("@g.us")??!1,isViewOnce:c(r).includes("viewOnce"),isForwarded:c(e.message).includes("isForwarded"),isEdited:c(r).includes("editedMessage"),isBroadcast:e.broadcast,isAuthor:t.authors.includes(Number(K?.split("@")[0])),media:M},reply:p&&{fromMe:C?.key?.fromMe,chatId:i(y,["stanzaId"])[0],participant:S,pushName:C?.pushName,timestamp:C?.messageTimestamp,type:u[0],text:H,isGroup:c(y).includes("@g.us")??!1,isViewOnce:c(y).includes("viewOnce"),isForwarded:c(e.message).includes("isForwarded"),isAuthor:t.authors.includes(Number(S?.split("@")[0])),media:v}}})):[]}var B=class{pairing;phoneNumber;showLogs;authors;ignoreMe;canNext=!1;socket=w;sock={};constructor({pairing:t,phoneNumber:o,showLogs:n,authors:e,ignoreMe:a}){this.pairing=t??!0,this.phoneNumber=o,this.showLogs=n??!0,this.ignoreMe=a??!1,this.authors=e??[],this.init()}async init(){let t=(0,f.makeInMemoryStore)({}),{state:o,saveCreds:n}=await(0,f.useMultiFileAuthState)("session/zaileys");t.readFromFile("session/data.json"),N(async()=>{try{t.writeToFile("session/data.json")}catch{await this.socket.emit("conn_msg",["fail",A.default.yellow("[DETECTED] session folder has been deleted by the user")]),await b(2e3),await this.socket.emit("conn_msg",["fail",A.default.yellow("Please rerun the program...")]),await process.exit()}},1e4);let e=(0,f.makeWASocket)(z(this,o,t));t.bind(e.ev),e.ev.on("creds.update",n),e.ev.on("connection.update",async a=>{let r=_(this),{connection:p,lastDisconnect:g}=a;if(p=="connecting"&&console.log("menghubungkan...."),this.pairing&&this.phoneNumber&&!o.creds.me&&!e.authState.creds.registered){this.socket.emit("conn_msg",["start","Initialization new session..."]),await b(2e3),this.socket.emit("conn_msg",["start","Creating new pairing code..."]),await b(6e3);let y=await e.requestPairingCode(this.phoneNumber.toString());this.socket.emit("conn_msg",["info",`Connect with pairing code : ${A.default.green(y)}`])}p==="close"?g?.error?.output?.statusCode!==f.DisconnectReason.loggedOut&&(console.log("reconecting..."),this.init()):p==="open"&&console.log("koneekk")}),e.ev.process(async a=>{if(a["messages.upsert"]){let r=a["messages.upsert"];console.log(c({msg:r}));let p=await J(r.messages,this,t);if(p.filter(g=>g).length==0)return;await this.socket.emit("messages.upsert",p)}})}async on(t,o){let n=(e,a)=>this.socket.on(e,a);switch(t){case"connection":break;case"message":n("messages.upsert",e=>{e&&o(e)});break}}};0&&(module.exports={Client,ConnectionConfig,InitDisplay,MESSAGE_TYPE,MessageParser,delay,fetchJson,getMessageType,getValuesByKeys,jsonParse,jsonString,loop,postJson,removeKeys,timeout});
