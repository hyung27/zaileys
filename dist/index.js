"use strict";var Z=Object.create;var O=Object.defineProperty;var $=Object.getOwnPropertyDescriptor;var X=Object.getOwnPropertyNames;var ee=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty;var se=(t,e)=>{for(var s in e)O(t,s,{get:e[s],enumerable:!0})},V=(t,e,s,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of X(e))!te.call(t,n)&&n!==s&&O(t,n,{get:()=>e[n],enumerable:!(i=$(e,n))||i.enumerable});return t};var v=(t,e,s)=>(s=t!=null?Z(ee(t)):{},V(e||!t||!t.__esModule?O(s,"default",{value:t,enumerable:!0}):s,t)),ne=t=>V(O({},"__esModule",{value:!0}),t);var pe={};se(pe,{Actions:()=>x,Client:()=>W,ConnectionConfig:()=>z,InitDisplay:()=>q,MESSAGE_TYPE:()=>I,MessageParser:()=>J,delay:()=>w,fetchJson:()=>ae,getMessageType:()=>r,getValuesByKeys:()=>a,jsonParse:()=>N,jsonString:()=>u,loop:()=>E,postJson:()=>re,removeKeys:()=>P,timeout:()=>ie});module.exports=ne(pe);var x=class{constructor({pairing:e,markOnline:s,phoneNumber:i,showLogs:n,authors:o,ignoreMe:m}){}sendText(){return"system"}sendReply(){}};var M=require("baileys"),Q=v(require("ora"));var T=require("baileys"),_=v(require("node-cache")),R=v(require("pino"));var A={author:"https://github.com/zaadevofc",repository:"https://github.com/zaadevofc/zaileys",package:"https://www.npmjs.com/package/zaileys",homepage:"https://zaadevofc.github.io/zaileys/",version:[2,2413,1],browser:["Mac OS","chrome","121.0.6167.159"]};function z(t,e,s){async function i(n){return s?(await s.loadMessage(n.remoteJid,n.id))?.message||void 0:T.proto.Message.fromObject({})}return{printQRInTerminal:!t.pairing,markOnlineOnConnect:!t.markOnline,defaultQueryTimeoutMs:0,connectTimeoutMs:6e4,keepAliveIntervalMs:1e4,msgRetryCounterCache:new _.default,syncFullHistory:!0,mobile:!1,generateHighQualityLinkPreview:!0,browser:A.browser,version:A.version,logger:(0,R.default)({enabled:!1}),auth:{creds:e.creds,keys:(0,T.makeCacheableSignalKeyStore)(e.keys,(0,R.default)({enabled:!1}))},getMessage:i,patchMessageBeforeSending:n=>(!!(n.buttonsMessage||n.templateMessage||n.listMessage)&&(n={viewOnceMessage:{message:{messageContextInfo:{deviceListMetadataVersion:2,deviceListMetadata:{}},...n}}}),n)}}var I={text:"text",conversation:"text",imageMessage:"image",contactMessage:"contact",locationMessage:"location",extendedTextMessage:"text",documentMessage:"document",audioMessage:"audio",videoMessage:"video",protocolMessage:"protocol",contactsArrayMessage:"contactsArray",highlyStructuredMessage:"highlyStructured",sendPaymentMessage:"sendPayment",liveLocationMessage:"liveLocation",requestPaymentMessage:"requestPayment",declinePaymentRequestMessage:"declinePaymentRequest",cancelPaymentRequestMessage:"cancelPaymentRequest",templateMessage:"template",stickerMessage:"sticker",groupInviteMessage:"groupInvite",templateButtonReplyMessage:"templateButtonReply",productMessage:"product",deviceSentMessage:"deviceSent",listMessage:"list",viewOnceMessage:"viewOnce",orderMessage:"order",listResponseMessage:"listResponse",ephemeralMessage:"ephemeral",invoiceMessage:"invoice",buttonsMessage:"buttons",buttonsResponseMessage:"buttonsResponse",paymentInviteMessage:"paymentInvite",interactiveMessage:"interactive",reactionMessage:"reaction",stickerSyncRmrMessage:"sticker",interactiveResponseMessage:"interactiveResponse",pollCreationMessage:"pollCreation",pollUpdateMessage:"pollUpdate",keepInChatMessage:"keepInChat",documentWithCaptionMessage:"document",requestPhoneNumberMessage:"requestPhoneNumber",viewOnceMessageV2:"viewOnce",encReactionMessage:"reaction",editedMessage:"text",viewOnceMessageV2Extension:"viewOnce",pollCreationMessageV2:"pollCreation",scheduledCallCreationMessage:"scheduledCallCreation",groupMentionedMessage:"groupMentioned",pinInChatMessage:"pinInChat",pollCreationMessageV3:"pollCreation",scheduledCallEditMessage:"scheduledCallEdit",ptvMessage:"ptv",botInvokeMessage:"botInvoke",callLogMesssage:"callLog",encCommentMessage:"encComment",bcallMessage:"bcall",lottieStickerMessage:"lottieSticker",eventMessage:"event",commentMessage:"comment",newsletterAdminInviteMessage:"text",extendedTextMessageWithParentKey:"text",placeholderMessage:"placeholder",encEventUpdateMessage:"encEventUpdate"};function E(t,e){return setInterval(t,e)}function u(t){return JSON.stringify(t??{},null,2)}function N(t){return JSON.parse(u(t))}function ie(t,e){return setTimeout(t,e)}async function w(t){return new Promise(e=>setTimeout(e,t))}var ae=async(t,e)=>await fetch(t).then(s=>s.json()),re=async(t,e)=>await fetch(t,{body:JSON.stringify(e),method:"POST"}).then(s=>s.json());function a(t,e){let s=[],i=n=>{n!=null&&(Array.isArray(n)?n.forEach(i):typeof n=="object"&&Object.entries(n).forEach(([o,m])=>{e.includes(o)&&s.push(m),i(m)}))};return i(t),s}function P(t,e){let s=i=>{if(i===null||typeof i!="object")return i;if(Array.isArray(i))return i.map(s);let n={};for(let o in i)e.includes(o)||(n[o]=s(i[o]));return n};return s(N(t))}function r(t){if(t=N(t),typeof t!="object"||t===null)return[];for(let e of Object.keys(t))if(Object.keys(I).includes(e))return[I[e],e];for(let e of Object.values(t)){let s=r(e);if(s)return s}return[]}var L=v(require("cfonts")),G=v(require("ora"));var j=require("events"),U=v(require("quick-lru")),Oe=new U.default({maxSize:9999999999}),C=new j.EventEmitter;var D="https://trakteer.id/zaadevofc";function q(t){console.clear(),L.default.say("Zaileys",{font:"block",colors:["white","green"],letterSpacing:1,lineHeight:1,space:!1,maxLength:"0"}),L.default.say(`         Love this package? help me with donation:         |               ${D}                 |`,{font:"console",colors:["black"],background:"green",letterSpacing:1,space:!1,maxLength:"0"});let e=(0,G.default)();C.on("conn_msg",async s=>{await e[s[0]](s[1])}),t.showLogs&&C.on("act_msg",s=>{})}async function J(t,e,s,i){return t?await Promise.all(t.map(async(o,m)=>{if(r(o.message).length==0||r(o.message)[0]=="protocol"||u(o.message).includes("pollUpdateMessage"))return;let c=P(o.message,["contextInfo"]),d=a(o.message,["quotedMessage"])[0],g=o.key,b=a(o.message,["contextInfo"])[0],k=r(c)[1]=="editedMessage",B=k&&a(o.message,["protocolMessage"])[0].key,S=k&&P(await s.loadMessage(B.remoteJid,B.id),["contextInfo"]);S=P(S.message,["contextInfo"]);let F=a(g,["participant"])[0]||a(g,["remoteJid"])[0],K=a(b,["participant"])[0],p=r(k?S:c);p=p[0]=="ephemeral"?r(a(c,[p[1]])):p,p=p[0]=="viewOnce"?r(a(c,[p[1]])):p;let l=r(d);l=l[0]=="ephemeral"?r(a(d,[l[1]])):l,l=l[0]=="viewOnce"?r(a(d,[l[1]])):l;let H=a(c,["conversation","text","caption","contentText","description"])[0],Y=a(d,["conversation","text","caption","contentText","description"])[0],h=!["text","reaction"].includes(p[0])&&a(k?S:c,[p[1]=="documentWithCaptionMessage"?"documentMessage":p[1]])[0];h=p[0]=="ephemeral"?a(h,r(h))[0]:h,h=p[0]=="viewOnce"?a(h,r(h))[0]:h;let f=!["text","reaction"].includes(l[0])&&a(d,[l[1]=="documentWithCaptionMessage"?"documentMessage":l[1]])[0];return f=l[0]=="ephemeral"?a(f,r(f))[0]:f,f=l[0]=="viewOnce"?a(f,r(f))[0]:f,{body:{fromMe:o.key.fromMe,chatId:o.key.id,remoteJid:a(g,["remoteJid"])[0],participant:o.key.fromMe?i.creds.me?.id.replace(":74",""):F,pushName:o.key.fromMe?i.creds.me?.verifiedName||i.creds.me?.name:o.pushName,timestamp:o.messageTimestamp*1e3,type:p[0],text:H,isStory:u(g).includes("status@broadcast"),isGroup:u(g).includes("@g.us"),isViewOnce:u(c).includes("viewOnce"),isForwarded:u(o.message).includes("isForwarded"),isEdited:u(c).includes("editedMessage"),isBroadcast:o.broadcast,isAuthor:e.authors.includes(Number(F?.split("@")[0])),isEphemeral:a(o.message,["expiration"])[0]>0,media:h},reply:d?{chatId:a(b,["stanzaId"])[0],participant:K,type:l[0],text:Y,isGroup:u(b).includes("@g.us"),isViewOnce:u(b).includes("viewOnce"),isForwarded:u(o.message).includes("isForwarded"),isAuthor:e.authors.includes(Number(K?.split("@")[0])),media:f}:!1}})):[]}var W=class extends x{pairing;markOnline;phoneNumber;showLogs;authors;ignoreMe;socket=C;socked={};spinners=(0,Q.default)();initialized=!1;initPromise=null;constructor({pairing:e,markOnline:s,phoneNumber:i,showLogs:n,authors:o,ignoreMe:m}){super({pairing:e,markOnline:s,phoneNumber:i,showLogs:n,authors:o,ignoreMe:m}),this.pairing=e??!0,this.markOnline=e??!0,this.phoneNumber=i,this.showLogs=n??!0,this.ignoreMe=m??!1,this.authors=o??[]}async init(){return this.initialized?this.initPromise:(this.initialized=!0,this.initPromise=(async()=>{q(this),this.spinners.start("Connecting to server...");let e=(0,M.makeInMemoryStore)({}),{state:s,saveCreds:i}=await(0,M.useMultiFileAuthState)("session/zaileys");E(async()=>{try{e.readFromFile("session/data.json"),e.writeToFile("session/data.json")}catch{await this.spinners.fail("Warning: Cannot detect session file"),await w(2e3),await this.spinners.info("Please rerun the program..."),await process.exit()}},1e4);let n=(0,M.makeWASocket)(z(this,s,e));if(e.bind(n.ev),n.ev.on("creds.update",i),this.pairing&&this.phoneNumber&&!n.authState.creds.registered){this.spinners.text="Initialization new session...",await w(2e3),this.spinners.text="Creating new pairing code...",await w(6e3);try{let o=await n.requestPairingCode(this.phoneNumber.toString());this.spinners.info(`Connect with pairing code : ${o}`)}catch{this.spinners.fail("Connection close. Please delete session and run again..."),process.exit(0)}}return n.ev.on("connection.update",async o=>{let{connection:m,lastDisconnect:c,qr:d,isNewLogin:g}=o;m=="connecting"&&this.spinners.start("Connecting to server..."),!this.pairing&&d&&this.spinners.info("Scan this QR Code with your WhatsApp"),m==="close"?c?.error?.output?.statusCode!==M.DisconnectReason.loggedOut?(this.spinners.info("Reconnecting to server..."),await this.init()):(this.spinners.fail("Detected logout. Please delete session and run again"),process.exit(0)):m==="open"&&(this.spinners.succeed("Successfully connected to server"),console.log())}),{sock:n,store:e,state:s}})(),this.initPromise)}async on(e,s){let{sock:i,store:n,state:o}=await this.init();this.socked={sock:i,store:n,state:o};let m=(c,d)=>this.socket.on(c,d);switch(e){case"connection":break;case"message":i.ev.on("messages.upsert",async c=>{let d=await J(c.messages,this,n,o);d.filter(g=>g).length!=0&&d.forEach(g=>{s(g)})});break}}async sendMsg(e,{jid:s}){await this.socked.sock?.sendMessage(s,{text:e})}};0&&(module.exports={Actions,Client,ConnectionConfig,InitDisplay,MESSAGE_TYPE,MessageParser,delay,fetchJson,getMessageType,getValuesByKeys,jsonParse,jsonString,loop,postJson,removeKeys,timeout});
