"use strict";var I=Object.create;var l=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var z=Object.getOwnPropertyNames;var A=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var R=(t,e)=>{for(var o in e)l(t,o,{get:e[o],enumerable:!0})},v=(t,e,o,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of z(e))!N.call(t,s)&&s!==o&&l(t,s,{get:()=>e[s],enumerable:!(n=O(e,s))||n.enumerable});return t};var c=(t,e,o)=>(o=t!=null?I(A(t)):{},v(e||!t||!t.__esModule?l(o,"default",{value:t,enumerable:!0}):o,t)),D=t=>v(l({},"__esModule",{value:!0}),t);var Q={};R(Q,{Client:()=>P,ConnectionConfig:()=>d,InitDisplay:()=>w,MessageParser:()=>q,delay:()=>m,loop:()=>y,timeOut:()=>j});module.exports=D(Q);var a=require("@whiskeysockets/baileys"),T=c(require("pino"));var p=require("@whiskeysockets/baileys"),h=c(require("pino"));var x={author:"https://github.com/zaadevofc",repository:"https://github.com/zaadevofc/zaileys",package:"https://www.npmjs.com/package/zaileys",version:[2,2413,1]};var C=c(require("node-cache"));function d(t){async function e(o){return t.store?(await t.store.loadMessage(o.remoteJid,o.id))?.message||void 0:p.proto.Message.fromObject({})}return{printQRInTerminal:!t.pairing,defaultQueryTimeoutMs:0,connectTimeoutMs:6e4,keepAliveIntervalMs:1e4,msgRetryCounterCache:new C.default,syncFullHistory:!0,mobile:!1,markOnlineOnConnect:!1,generateHighQualityLinkPreview:!0,browser:["Mac OS","chrome","121.0.6167.159"],version:x.version,logger:(0,h.default)({level:"fatal"}),auth:{creds:t.state.creds,keys:(0,p.makeCacheableSignalKeyStore)(t.state.keys,(0,h.default)().child({level:"silent",stream:"store"}))},getMessage:e,patchMessageBeforeSending:o=>(!!(o.buttonsMessage||o.templateMessage||o.listMessage)&&(o={viewOnceMessage:{message:{messageContextInfo:{deviceListMetadataVersion:2,deviceListMetadata:{}},...o}}}),o)}}function y(t,e){return setInterval(()=>t(),e)}function j(t,e){return setTimeout(()=>t(),e)}function m(t){return new Promise(e=>setTimeout(e,t))}var k=c(require("cfonts")),_=c(require("ora"));var M=require("events"),g=new M.EventEmitter;function w(t){console.clear(),k.default.say("Zaileys",{font:"block",colors:["white","green"],letterSpacing:1,lineHeight:1,space:!1,maxLength:"0"}),k.default.say("          Love this package? help me with donation:        |                https://ko-fi.com/zaadevofc                |",{font:"console",colors:["black"],background:"green",letterSpacing:1,space:!1,maxLength:"0"});let e=(0,_.default)();g.on("conn_msg",o=>{e[o[0]](o[1])}),t.showLogs}var f=c(require("chalk")),P=class{pairing;phoneNumber;showLogs;socket=g;store;state;constructor({pairing:e,phoneNumber:o,showLogs:n}){this.pairing=e??!0,this.phoneNumber=o,this.showLogs=n??!0,this.client()}async client(){w(this);let e=(0,a.makeInMemoryStore)({logger:(0,T.default)().child({level:"silent",stream:"store"})}),{state:o,saveCreds:n}=await(0,a.useMultiFileAuthState)("session/zaileys");e.readFromFile("session/data.json"),y(async()=>{try{e.writeToFile("session/data.json")}catch{await this.socket.emit("conn_msg",["fail",f.default.yellow("[DETECTED] session folder has been deleted by the user")]),await m(2e3),await this.socket.emit("conn_msg",["fail",f.default.yellow("Please rerun the program...")]),await process.exit()}},1e4),this.state=o,this.store=e;let s=(0,a.makeWASocket)(d(this));if(e.bind(s.ev),this.pairing&&this.phoneNumber&&!o.creds.me&&!s.authState.creds.registered){this.socket.emit("conn_msg",["start","Initialization new session..."]),await m(2e3),this.socket.emit("conn_msg",["start","Creating new pairing code..."]),await m(6e3);let i=await s.requestPairingCode(this.phoneNumber.toString());this.socket.emit("conn_msg",["info",`Connect with pairing code : ${f.default.green(i)}`])}return s.ev.on("messages.upsert",async i=>{console.log(JSON.stringify(i.messages,null,2)),this.socket.emit("act_message",i.messages)}),s.ev.process(async i=>{if(i["creds.update"]&&await n(),i["connection.update"]){let S=i["connection.update"],{connection:u,lastDisconnect:F,qr:L}=S;if(u=="connecting"&&(this.socket.emit("act_connection","connecting"),this.socket.emit("conn_msg",["start","Connecting to server..."])),L&&this.socket.emit("conn_msg",["warn","Please scan the QR code..."]),u==="close"){this.socket.emit("act_connection","close");let b=F?.error?.output.statusCode!==a.DisconnectReason.loggedOut;if(b&&(this.socket.emit("conn_msg",["warn","Failed to connect. Waiting for reconnect..."]),this.client()),!b){this.socket.emit("conn_msg",["fail","Failed to connect. Please delete session and try again."]);return}await this.socket.emit("conn_msg",["info","Trying to reconnect..."]),await m(2e3),await this.socket.emit("conn_msg",["clear"])}u==="open"&&(this.socket.emit("act_connection","ready"),this.socket.emit("conn_msg",["succeed","Connected to server"]),console.log())}}),s}on(e,o){let n=(s,i)=>this.socket.on(`act_${s}`,i);switch(e){case"connection":n(e,o);break;case"message":n(e,o);break;default:break}}};function q(){}0&&(module.exports={Client,ConnectionConfig,InitDisplay,MessageParser,delay,loop,timeOut});
